# 11.智能实现的组件

为了产生影响，情报必须与用户相联系。

也就是说，当用户与系统交互时，智能必须通过正确的输入来执行，用户体验必须做出响应。当新的智能被创建时，它必须被验证并被部署到需要它的地方。而且必须有方法来确定是否一切都在工作，并且有机制来收集需要什么来随着时间的推移提高智能。

智能实现负责所有这些。它是创建智能服务的基础。

作为类比，考虑一个 web 服务器。

web 服务器实现需要接受网络连接、进行身份验证、解释请求并找到正确的内容、处理它(可能运行脚本)、服务它、创建日志，等等。

一旦 web 服务器实现可用，内容创建者就可以用它来创建各种有用的网站。

这类似于智能系统的实现，它允许智能编排器随着时间的推移产生有用的用户交互。智能、人工智能和机器学习正在改变世界，但智能系统的正确实施将这些投入到位，以实现它们的承诺。

本章介绍了构成智能系统实现的组件。

## 智能实现的一个例子

想象一下，一个智能系统被设计来帮助用户知道一个网页是否有趣。

用户浏览到一个页面，如果系统认为用户阅读该页面会笑，就会弹出一个小笑脸。你知道，这样就不会有人再错过有趣的事情了…

很简单。让我们讨论一下如何实现这个智能系统。

它从一个程序开始，这个程序可以检查网页的内容，并判断它是否有趣。这可能是机器学习产生的模型，但也可能是一些简单的启发。例如，一个非常简单的启发可能会说，任何包含短语“走进酒吧”或“谁在那里”的页面都很有趣，而每个不包含这些短语的页面都不有趣。

对某些人来说，这可能是真的——也许你也有那个叔叔…

有人可以为 web 浏览器编写一个包含这个模型的插件。当加载一个新的 web 页面时，插件获取页面的内容，对照模型进行检查，并根据模型显示的内容显示适当的用户体验(如果模型认为页面有趣，则显示笑脸，如果模型认为页面不有趣，则不显示任何内容)。

这个插件是一个非常简单的智能实现。

但是发布插件，看到用户下载它，很快就会有人想知道它是否工作。

因此，也许插件包含了一种让用户提供反馈的方式。如果他们看到一页的底部，系统说会很有趣，但他们没有笑，他们可以点击一张皱眉的脸，让系统知道它犯了一个错误。如果他们读了一个系统没有标记为有趣的页面，但发现自己笑了，他们可以点击一个笑按钮让系统知道。我们甚至可能想知道用户是否更有可能阅读被标记为有趣的页面，所以我们可能会测量用户在我们标记为有趣的页面上花费多长时间，以及他们在我们没有标记的页面上花费多长时间。

该插件收集所有这些用户反馈和行为，并将其作为遥测数据发送回服务。

增加遥测技术可以改善整体智能实施，因为它可以让我们回答一些重要问题，如智能有多好，以及用户如何看待整个系统——如果我们正在实现我们的总体目标。它也让我们不断进步。

因为当智能创造者查看遥测数据时，他们会发现他们最初的模型没有很好工作的各种地方。可能互联网上大多数搞笑的东西都是图片，而不是文字。也许一个国家的人不会被另一个国家的人觉得好笑的事情逗乐。诸如此类的事情。

智能创造者会花一些时间看遥测数据；也许他们会抓取一些最初系统出错的页面，建立一些新的模型。然后他们会有一个比原来更喜欢的模型，他们会想把它送给用户。

智能实现将不得不处理这个问题。一种选择是发布一个全新版本的插件——有趣的 Finder v 2.0——它包含了新的模型。但是第一个版本的用户需要找到这个新插件并选择安装它。大部分都不会。即使是那些知道的人也可能要花很长时间去做。这导致情报更新缓慢(如果有的话)，并降低了情报创造者工作的潜力。此外，情报可能变化很快:也许每周，也许每天，也许每小时多次。除非实现能够定期可靠地向用户获取新的智能，否则智能系统不会非常智能。

因此实现可能会升级插件来进行自动更新。或者更好的是，插件可以被修改为只更新模型(本质上是数据)，而保持所有其他代码不变。该插件定期检查服务器，确定是否有新的智能，并下载它。

太好了。现在，实现运行智能，测量它，并更新它。在这一点上，为智能服务的代码量可能比智能本身还多:任何智能系统的很大一部分都是实现。这个版本的系统是完整的，它关闭了用户和智能之间的回路，允许用户简单地通过使用系统和提供反馈来受益于和改进智能。

但是有些事情真的不好笑。有些事情是令人讨厌的，可怕的。我们真的，真的不希望我们的系统犯这种错误，把高度攻击性的内容标记为有趣。

因此，当我们的系统犯了非常严重的错误时，也许有一种方法可以让用户报告。用户体验中的一个新按钮，将关于攻击性页面的遥测数据发送回我们的服务。

也许我们建立一个小的工作流程，雇佣一些人来验证用户报告的攻击性网站确实很糟糕(而不是某种喜剧战争，他们报告彼此的内容)。这导致了一个“真的，真的不好笑”的网站列表。实现需要确保客户端尽快更新列表的变化。当模型被更新时，这个列表可以被更新。或者这还不够快，插件需要更积极地检查这个列表，并将它包含的智能与模型输出的智能结合起来。

所以现在插件被更新了，这样每当它访问一个新的页面时，它就会在运行它的本地模型时发出一个服务调用。然后，它将这两种形式的智能(基于服务器的智能和基于客户端的智能)的结果结合起来。如果服务器说一个网站“真的，真的不好笑”，那么不管客户端模型说什么，这个网站都不好笑。

到这个时候，智能创造者将会有各种各样的想法来构建不能在插件中运行的更好的模型。也许新的想法不能在客户端，因为它们占用了太多的内存。也许它们不能在客户端，因为它们需要外部查找(例如，语言翻译服务),这在插件中引入了太多的延迟。也许插件需要在 CPU 严重受限的环境中运行，比如在电话中，而智能创造者只是想要更多的空间。

这些类型的智能可能无法在客户端上运行，但是它们可能完全可以在服务的后端使用。

例如，当很多用户开始访问一个新网站时，后端会注意到。它可以抓取网站。它可以运行几十种不同的算法——专门针对图像的算法、寻找特定类型幽默的算法、针对不同语言或文化的算法——并以某种方式将输出发送给客户端。

所以现在这个插件结合了来自多个来源的智能——一些在云中，一些它自己执行。这是管理经验。它测量用户与智能交互的结果，并收集数据进行改进。还有更多。

并非每个智能系统实施都需要所有这些组件。并不是每个智能系统都需要以相同的程度实现它们。本书的这一部分将提供一个基础，帮助您了解何时以及如何投资于各种组件，以便您的智能系统有最大的机会实现其目标，并且高效地完成。

## 智能实现的组件

智能实现可以非常简单，也可以非常复杂。但是，每个智能系统实施都必须解决一些关键功能，它们是:

*   在运行时执行智能，点亮体验。
*   吸收新的情报，验证它，并把它送到需要它的地方。
*   监控情报(和用户结果),并获取改进系统所需的任何遥测数据。
*   为情报创造者提供支持。
*   提供控制来编排系统，以受控的方式发展系统，并处理错误。

### 智能运行时

智能必须被执行并与用户体验相联系。

为了执行智能，系统必须收集交互的上下文，智能做出好的决策需要考虑的所有事情。这可能包括:用户正在做什么；用户最近做了什么；相关传感器说什么；用户在屏幕上看什么；任何可能与情报部门的决策有关的东西。

上下文必须被打包、转换并呈现给代表智能的模型。上下文和模型的组合产生预测。

运行时可能完全在客户端，也可能在客户端和服务之间进行协调。

然后，预测必须用来影响系统，点亮体验——创造影响。

### 情报管理

当新的情报变得可用时，它必须被吸收并传送到需要它的地方。

例如，如果智能是在公司总部的实验室中创建的，并且运行时需要在全美国的烤面包机上执行智能，则智能管理系统必须将智能发送给所有的烤面包机。

或者这种智能运行在一种服务中。

或者它可能部分在后端运行，部分在客户端运行。

对于智能可以生活在哪里，有很多选择，有利也有弊。

在这个过程中，需要对情报进行验证，以确保它不会做出(太)疯狂的事情。

智能系统通常依赖于不止一个智能来源。这些可能包括多模型、启发式和错误覆盖。这些必须结合起来，它们的结合需要验证和交付。

### 智能遥测管道

获得正确的监控和遥测是产生智能的基础，这种智能可以正确运行，并可以随着时间的推移而改进。

有效的监控和遥测包括了解智能在什么环境中运行，以及它给出什么类型的答案。它包括了解智能正在产生什么样的体验，以及用户如何反应。一个有效的遥测系统将获得适当的数据，以获得新的和更好的智能。

在大型智能系统中，遥测和监控系统会产生大量数据。

因此，智能实现必须决定观察什么，采样什么，以及如何消化和总结信息，以便在智能系统的各个部分之间实现智能创建和协调。

### 智能创造环境

为了让智能系统成功，需要在运行时、交付、监控和智能创建之间进行大量的协调。

例如，为了产生准确的智能，智能创建者必须能够准确地再现运行时发生的事情。这意味着:

*   遥测必须捕获运行时使用的相同上下文(关于用户正在做什么、内容、传感器输出等的信息)。
*   智能创建者必须能够以与运行时完全相同的方式处理这个上下文。
*   智能创造者必须能够将遥测技术中显示的上下文与用户从交互中获得的最终结果(好的或坏的)联系起来。

当智能创造者想要在他们的模型检查什么类型的信息/背景上创新时，这可能是困难的(并且他们将会；这被称为特征工程，是智能创造过程的关键部分。当监控系统没有收集准确的信息时，这可能会很困难，导致运行时和智能创建者所看到的不匹配。当在不同于智能创建设备的设备类型上执行智能时，这可能是困难的。也许运行时与智能创建环境中的协处理器、图形卡或数学库版本不同。

这些中的任何一个都会导致问题。

智能实现将通过为智能创造者提供尽可能多的一致性来创建一个减轻这些问题的环境。

### 智能编排

智能系统需要协调。

*   如果它进入了糟糕的状态，就需要有人把它弄出来。
*   如果它开始犯严重的错误，需要有人在调查根本原因的同时减轻错误。
*   随着问题、智能和用户群的发展，需要有人能够控制和调整智能和体验，以达到预期的结果。

例如，如果智能创建产生了一个糟糕的模型(并且没有一个检查发现它)，那么这个模型可能会给客户带来糟糕的体验。智能协调团队应该能够在遥测中快速识别回归，跟踪问题直到特定模型，并禁用模型或将模型恢复到以前的版本。

如果事情变得足够糟糕，intelligence orchestrator 可能需要关闭整个系统，而实现和体验应该会很好地响应。

为编排智能系统提供良好的可见性和工具，可以让智能创造更加自信地行动，承担更大的风险，并更快地改进。

## 摘要

需要实施智能系统，以便将智能与客户联系起来。这包括:

*   执行智能，点亮智能体验。
*   管理情报，将其运送到需要的地方。
*   收集关于智能如何运行和用户如何响应的遥测数据(并改进智能)。
*   支持那些必须创造智能的人，让他们以和用户完全一样的方式与环境互动。
*   帮助协调智能系统的整个生命周期，控制其组件，处理错误，等等。

智能系统不同于传统的程序，它需要完成、实施、运输和离开。它更像是一种服务，必须随着时间的推移而运行和改进。智能系统的实施是允许这种情况发生的平台。

## 供思考…

阅读完本章后，您应该:

*   了解有效智能实施的属性-从一个智能(例如，机器学习模型)到一个全功能智能系统需要什么。
*   能够说出并描述构成智能系统实施的关键组件。

你应该能够回答这样的问题:

想想你每天做的一件事:

*   支持活动的智能系统的最小化实现会是什么样子？
*   运行时、智能管理、遥测、智能创建环境、流程编排，您认为哪个组件最需要投资？为什么？