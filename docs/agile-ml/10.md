# 十、简单

> 简单——***的艺术最大化未完成的工作数量****——至关重要。*
> 
> *—agilemanifesto.org/principles*

敏捷开发的出现在一定程度上是对自顶向下、委员会驱动的软件工程方法的反应。在撰写敏捷宣言的时候，许多创新开始在开发社区中获得牵引力，包括极限编程和 Scrum，而各种现有的方法，例如看板，正在被应用到软件开发的新的更快节奏的世界中。敏捷方法将问题解决的焦点从上游委员会的讨论转移到流动工程活动中。原则 10 强调了对这一重点转移的反应，主张保护工程能力免受瀑布的远距离影响，在可以找到最相关背景的时刻做出决定。随着老派方法的消失，这一原则的原始动机不再是问题。然而，理解如何通过为了项目的利益而选择他们所做的工作来优化他们贡献的效果，仍然是高效的开发人员和团队的基本技能。此外，从选择性许可中出现的对话是磨练工作焦点和确定项目范围的极好方式。

这一原则中使用的术语太容易解释了。与其担心“简单”对于工程过程意味着什么，不如让我们考虑一下这个原则的精神。这个原则不是关于逃避工作，而是确保正在做的工作是有意地、明确地推动项目前进。这种类型的关注是做事情和决定做什么事情之间反馈回路的重要部分。

## 勤于任务描述

在 scrum 中，大部分的计划和决策过程都以编写用户故事和任务描述而告终。这些在正在进行的项目过程中提供了一个有用的转折点，在那里可以检查着手进行不必要工作的可能性。一些简单的测试可以应用于描述计划工作的语言，这将有助于避免一些明显的低效投资。

### 未详细说明的工作

不明确的任务会导致工作没有进展。我们发现在数据项目中经常出现的一个例子是*改进*任务:“改进人名提取器”、“改进业务页面分类器”或“改进回归测试框架”。这个例子抓住了管理数据项目的基础——平衡数据和模型中的未知因素与可估计工作的离散块的已知因素。度量目标是通过一系列任务来实现的，这些任务在开发模型的过程中探索可能性的搜索空间。例如，在运行 20 次实验后，分类器可能会获得 10 个精度点的增益，并且在召回中没有回归，这些实验涉及清理训练数据、参数扫描、附加功能实现、添加在数据查看器中查看假阴性的能力等等。这些实验中的一小部分将在通向期望的度量目标的最终路径上。向工具链添加功能将会产生进一步的见解，从而允许对计划进行细化。设置和运行实验或在工具链中构建特征所涉及的每项任务都可以通过传统方式进行管理，并以合理的准确度估算成本。如果团队能够在数据和模型的搜索空间中完美地规划出一条路径，那么就可以通过一系列可预测的步骤来实现目标。然而，这当然是不可能的。因此，团队必须使用一些一般的策略和直觉来修剪搜索空间，因为它朝着目标前进。这是在项目规划的迭代中完成的 sprint。区分目标和任务可以让你实际上计划工作和管理团队的资源。通过短时间的迭代和频繁的实验，将度量放在这个活动的顶部，可以让您看到进展中的趋势。这将在某种程度上帮助您估计达到度量目标所需的努力。

“改善”一词表示两种情况——第一，组件不如预期的好，第二，不清楚它需要好到什么程度。任何被赋予这项任务的开发人员都应该首先反推并询问:“当前状态是什么？该任务完成后的理想状态是什么？”此外，即使有明确定义的度量目标，也可以编写更好的任务，准确描述要完成的工作——策略的应用，而不是工作的目标。任何无法估计的任务都应该分解成可以估计的任务或旨在减少未知因素的任务，这些未知因素会妨碍后面的任务得到正确的估计。

如果改进旨在解决特定的错误情况，例如，分类器系统地做得比一般情况差的数据群体的一个区域，则可以重写任务描述。不要说“改进”，而是开始谈论增加指标(精确度、召回率等。)然后分解成离散任务。这自然会导致子任务，包括对这种情况下的人群进行采样、测量和分析，以及通过模型空间进行实验——新的特征提取器、附加数据标签、标签校正等等。

现在你知道自己在做什么，知道了起点，那么目标呢？这里有很多方法可以让你变得清晰。首先，考虑改进的作用。虽然最明显的情况是交付价值，但是您也可能发现自己在项目的一个阶段工作，目标是展示能力。在这种情况下，您有兴趣了解看到指标有意义的变化所需的工作量。因此，目标应该是展示潜力的东西。想想错误率。你能降低 10%吗？如果您的目标是向最终客户交付价值，那么您需要考虑对他们来说可见且有意义的指标变化。

如果你正在处理特别困难的问题，那么根据改进的趋势来组织工作可能是很重要的。1%的指标增益可能不是您的客户所关心的，但是随着时间的推移，向一个有意义的目标显示指标的持续增益是一个很好的能力展示。

在所有这些情况下，如果在设定目标或跟踪进度时涉及到指标，那么就要考虑指标的力量。在给定样本量和判断质量的情况下，这种变化在统计上可能发生吗？我们已经看到了度量目标进展缓慢的情况。经过分析，我们发现测量数据中的噪声(由于判断任务的复杂性、工具的复杂性、指导方针的清晰性等。)可以淹没任何改进。

没有深入到“改进”任务的细节，你就冒了一个真正的风险，那就是承担一项看不到完成的工作。你会徘徊不前，不知道你已经创造了价值，没有将你获得的洞察力整合到你计划的优先事项中。具有讽刺意味的是，由于客户更愿意进行的其他更高优先级投资的机会成本，超出改进推理组件可能是浪费。

### 致命的连词

在上一节中，我们在任务描述中寻找“改进”这个词。另一个问题词是“和”如果你在一个任务描述中看到“和”，那就高高举起你的红旗。通过结合任务，比如说“分析分类器错误和提高回忆”，你假设第一个任务的洞察力不会影响你做第二个任务的决定。此外，你阻止了任务的完成——这是保持一个敏捷和有动力的团队运行的重要行为。您还面临着混合任务成本估计的风险。例如，分析通常应该有时间限制。如上所述，进行改进会带来复杂性和未知性。完成一项任务对团队有很大的价值。将相连的任务分成两部分，可以让你庆祝的完成时刻加倍。

### 跨任务依赖性和假设

措辞不当的任务标题和描述会导致团队中的沟通不畅，导致混淆谁在做什么以及各个工作是如何组合在一起的。如果你期望另一个开发人员按照你对任务的解释交付一些东西，但事实上他们正在进行不同的解释，那么你们中的一个或两个正在做的工作可能正朝着错误的方向前进。

在最近的一个项目中，一个为我们的预测生成和自动化度量计算的协议被分成了两个团队。一旦两个工作项都完成了，我们发现度量自动化被交付给了一个不同的现存度量，而新的度量计算的结果却没有被触及。

当参与计划过程时，如果你意识到你对某个特定任务的假设，最好说出来，这样有助于减少潜在的混乱和浪费。

我们发现，有几件事非常有助于摆脱危险的假设:

*   规划扑克:这是一个规划游戏，使用两个或更多人对任务成本的估计，以显示任务实际上是什么。总之，玩家各自给出一个估计值(不知道其他玩家的估计值)，然后对数字进行比较。如果它们相似，那么没有进一步的讨论。如果它们差别很大(例如，一个估计是另一个的两倍)，那么就进行下一轮讨论，更深入地研究任务的细节。这是一个很好的工具来找到这些脱节，因为它只需要一些时间来形成一个粗略的估计，这正是假设将被使用的地方。例如，假设任务是构建一个简单的标注工具来标注文本中的短语。你的估计是两天，但我的是五天。我们的编码技能没有什么不同，为什么会有差异呢？在讨论这个任务时，我假设我们需要对不同的标签标识进行管理，而你假设你只是将标签以一种简单的格式写入磁盘。

*   结对编程:如果生产者和消费者可以坐在一起实现 API、组件或数据转换，就可以避免对更正式的文档过程的需求，并允许交换的每一方快速迭代以获得对双方都有最小假设的最终结果。

*   合成数据:即使在创建 API 或处理任何数据之前，手工(或通过一些简单的自动化过程)生成一些合成数据也是有用的。这使消费者不必在根据数据编码和发现数据模型或交换格式的问题之前等待设计和实现。

### 词语很重要

在本书的很多地方，我们都提到了沟通是一项核心技能。就像好的代码一样，清晰的工作描述对团队在 sprint 中做实际工作的能力至关重要。培养对项目中使用的语言质量的批判态度可以帮助您浏览数据项目的全景。

## 早期整合

在具有多个 ML 组件的大型项目中，一个常见的分解是朝着集成点的度量目标努力。你的团队将以 90%的精确度和 80%的召回率产生数据，我的团队将产生一个搜索排名函数，其 DCG <sup>[2](#Fn2)</sup> 比当前排名器提高了 10 个百分点。实际上，很难预测上游团队需要交付什么，以便下游团队能够在改进的基础上实现他们的目标。因此，下游团队被激励去要求一个对他们来说安全的度量目标——换句话说，它可能比要求的要高。

在理想的情况下，您应该确保两个系统尽快集成。此外，下游系统将被设计成支持低成本实验。通过这样做，集成点的度量目标变得不那么重要——您可以直接观察上游改进对最终产品的影响。与更加分离的方法相比，这提供了更早完成项目的机会。

## 基线和启发式

给定一个新问题，通常会看到一个没有经验的团队带着最新的机器学习方法投入进来，急于展示他们的能力——他们会问这样一个问题:“当我们将这种方法应用于这些数据时，会发生什么？”除了建立度量标准的重要性之外，提出某种基线系统可以用很少的投资提供有用的见解。这可以是一个简单的方法，它总是输出二元分类器的正类。更多的信息是少量“显而易见的”规则的实现，这些规则捕捉了你对问题的直觉和假设。稍加努力，您可以训练一个简单的逻辑回归模型作为更复杂的 ML 方法的基线。通过对这些进行编码，并根据您的度量标准对它们进行评估，您将了解到问题空间的复杂性。此外，通过查看您的简单试探法对度量集产生的错误，您将对总体中的差异有所感觉。

在我们的从网页中提取企业名录的系统中，我们很好地支持了许多使用机器学习方法的实体提取方法。我们支持顺序模型和分类模型。然而，在交付电话号码提取器时，我们从一个简单的正则表达式开始。随着项目的进展，我们对不同国家的合法电话号码的模式有了更多的了解(例如，在美国，并不是所有的十位数序列都是有效的电话号码，这就是为什么电影中的号码总是包括 a 555)。这种知识和基于模式的方法的结合足以以所需的精度和回忆水平提取电话号码，因此我们甚至没有投资训练模型。

相比之下，我们在地址提取方面的投资始于使用有限状态转换器的传统基于模式的方法。虽然这种方法很方便，因为它已经存在，但我们很快发现了它的局限性，并切换到完全 ML 方法。

## 认识极限

作为数据科学家，我们热衷于提醒人们两个普遍真理:数据总是有噪音的，没有任何推理系统是完美的。对于后者，我们设定的预期是输出中总会有误差。我们已经在第 [9](09.html) 章中讨论过:确保你的系统在设计时将缓解作为主要功能的技术优势。这允许您在发现错误时做出反应并修复它们。这对于解决高度可见、潜在尴尬或危险的错误非常有用。但是，这是一个事后解决方案。错误已经暴露了。

大多数大规模的基于 ML 的工程团队已经围绕众包数据建立了系统。这些包括数据和工作管理系统，以及培训和管理远程或现场法官的工具和程序。这些法官将选择或被分配工作，他们执行一个小的单位价格。这种类型的人类智慧可以集成到您的数据处理工作流程中，我们称之为人在回路模型。

在本地搜索的世界中，所有记录都是相同的:企业或本地实体的名称、地址、电话号码等等。但是，根据数据的使用场景，实体的重要性会有很大的不同。事实上，在搜索中，很大一部分实体只向任何用户显示过几次，还有一部分从来没有显示过。因此，你的系统质量对重要的英雄实体 <sup>[3](#Fn3)</sup> 的错误比对那些从不露面的实体更敏感。考虑到这一点，我们希望确保系统对这些英雄实体的推断不仅更有可能是准确的，而且实际上是由人来验证的。白宫的地址不太可能改变，但如果改变了，你也不想因为没有在你的产品中反映出来而感到尴尬。

为了通过人在回路中的方法来处理这个问题，我们确定了一组我们要监控的实体。每当为这些实体计算变更时，我们不允许变更像其他实体一样在系统中进行，而是让它们走一点弯路。他们被集合起来接受人类法官的审查。如果更改被验证，那么信息就简单地流回系统。否则，错误不仅会被丢弃，还会被记录下来，这样系统就不会因为同样的问题而再次失败。以一点延迟为代价，我们可以确保重要的实体得到保护。

这种方法的好处是，它很容易扩展到人类法官的能力。您可以简单地根据实体显示给用户的次数来对它们的重要性进行排序。只要法官有空，他们就可以查看列表中在当前周期中发生变化的下一个实体。

通过为人在回路中而设计，您可以避免寻找 ML 驱动的方法来解决系统中最后几个质量点的日益困难和昂贵的任务。此外，这避免了为一个足够灵敏的度量系统提供资金的增加的费用，该度量系统甚至可以测量该级别的任何精度变化。

## 管理河马

有人离你的项目越远，他们对开发人员在战壕中的考验和磨难的了解就越少，他们对问题空间中什么是容易的，什么是困难的理解就越少。我们都有这样的经历，从外面看到另一个团队正在攻击的问题空间，并思考“这能有多难？”当持有这种观点的人在管理链中处于你之上时，立即对他们的意见做出反应可能是一个容易的选择，打破冲刺，把计划扔出窗外，通常四处奔波。意识到这些人可能产生的影响很重要——我们称他们的意见为 HiPPO(薪酬最高的人的意见)。

有两种值得考虑的一般方法。第一种策略我们称之为决策转移。当有影响力的人要求你采取行动时，你应该问他们当前的优先事项中哪些应该改变。这是处理这种情况的有效方法，因为它提供了教育的机会，也使任何种类的否决权的后果变得清楚。当然，这只有在你有一个管理良好的 backlog 和 sprint 计划的情况下才能做好。如果你是凭着自己的直觉，在计划“方法”的时候，那么你就很容易接受替代性的过程修正。

第二种方法是依靠数据。如果让你做 X 而不是 Y，你可以参考现有数据或者做一些快速但有原则的分析。如果河马的洞察力是有效的，那么很好。你已经被推动去更好地理解你的数据。

在这两种方法中，关键的投资是干预之前发生的事情。你的计划应该被制定出来(在 scrum 的意义上，而不是瀑布的意义上)，你的度量标准和数据应该足够成熟，以促进有根据的讨论。总的来说，我们发现领先我们的数据和指标的任何潜在对话者一步是有用的。如果您的指标将用于任何交互或数据集的某些分析，那么将下一级细节、子类型的分布、错误案例的细分等等放在您的口袋里，将对确保有效地做出正确的决策大有帮助。

## 快速下降

与传统的工程项目相比，数据项目的敏捷开发从根本上改变了风险的面貌。数据中的未知因素和手头推理问题的挑战使得选择空间变得更加复杂。考虑到数据的维度，我们有理由假设通往成功的道路是有限的。因此，方便地修剪搜索空间的能力是基本的。

快速失败 <sup>[4](#Fn4)</sup> 是一种策略，通过这种策略，你可以确定你的工作方向，以尽可能快地确定总体方法是否可行。您希望证明该方法会尽快失败，以避免在一个不起作用的解决方案上进行更长时间的投资。当然，推论是，如果你不能证明这一点，那么正在考虑的方法很可能有腿。

关于故障快速的一般考虑包括以下内容:

*   理解并测试你对组件或问题的假设:努力在你的计划中提出假设——这些事情必须对你的实现有好处。你有什么证据证明他们会？几乎可以肯定，您正在一个新的场景中应用该方法，或者应用于不同类型的数据。

*   缩放:当组件必须缩放时会发生什么？没有必要实现扩展，但是您当然应该寻找机会找出扩展策略的关键方面，并进行一些快速测试，可能使用合成数据或模拟工作负载。

*   标记数据生成:有没有一种方法可以综合或自动收集或创建数据？如果你需要人类法官，用你现在的工具能完成这个任务吗？我们发现，如果您自己做一些快速标记，您可能会了解到您试图解决的问题的中心概念实际上非常模糊，并且可能会产生低质量的标记数据。

## 构建、购买或开源

处理团队在解决方案中拥有的所有权数量的策略定义了团队的身份。一方面，完整的所有权方法将团队建立为问题空间的卓越中心。在另一个极端，致力于集成外部组件和数据源的策略将团队标识为平台和集成团队，潜在地具有相当大的业务关系需求。记住这一点很重要，因为这将影响你想要吸引的团队成员的类型。

当您的团队承担交付数据产品的任务时，购买与构建的考虑因素有几种发挥作用的方式:

*   购买或许可完整的数据集以及更新和维护它们的服务

*   购买将构成您的解决方案的一部分的数据集，您将对其进行改进和扩充

*   购买推理组件，您可以按原样应用到您自己获取的原始输入数据

*   购买工具链，以支持您的团队开发交付产品所需的模型

在所有这些场景中，要考虑的关键问题是如何通过依赖性来管理敏捷性。比如 dsat<sup>[5](#Fn5)</sup>会有什么反应？如何在提取软件中解决提取错误？在分类器中，如何对大量的误报进行优先排序和改进？

如果您完全依赖于某个数据源，那么将会有一个预期，即优先问题和个别错误将被报告给数据源并得到解决，然后将发布包含预期更改的新数据版本。第三方数据源会引起人们的兴趣，因为提供者有更多的资源放入数据中。这种依赖性具有经济意义，因为成本由多个客户分担。然而，这降低了你影响正在解决的问题的优先级的能力。理想情况下，第三方提供商将有一种机制，允许您发布问题报告或实际数据更正。潜在地，校正的验证和应用可以是服务的一部分——你可以按校正付费。

另一种方法是对您这边的数据应用补丁。这本质上是一个合并场景——第三方数据是一个信号，至少与您的校正数据和潜在的其他第三方数据集混合在一起。

总之，数据依赖要么是一种完全依赖于服务提供商一方的纠错延迟和优先级的策略，要么是一种需要您一方在合并和纠错数据管理方面进行投资的策略。

当谈到对第三方推理组件的依赖时，也有类似的考虑——如何管理对系统的改进，以解决大量的错误和特定的 DSATs。您这边的改进可以通过包装第三方组件并应用适当的轻量级规则来纠正特定的推理错误来管理。

### 建立整合框架

在完成了大量混合了第一方和第三方组件的项目后，我们意识到，与其将第三方选择和集成决策视为一次性考虑，导致围绕集成特定实现的特定设计，不如将问题视为提供一个通用框架，用于集成任何数量的潜在解决方案。这种方法的好处是允许您根据需要交换解决方案，但也允许您混合和匹配解决方案，因为它们适用于问题空间的不同领域。

例如，如果您正在评估文档理解的解决方案——即在给定原始输入的情况下确定文档逻辑结构的推理组件——您可能会发现一个解决方案擅长一般的高级布局，而另一个解决方案则擅长识别和构建表格。你想在前者价值一般的情况下，拥有后者的优势。要做到这一点，您可以构建一个两者都可以运行的框架。然后，框架会将结果组合成最终输出。

## 结论

在第 [10](10.html) 章“简单性”中，我们介绍了确保个人和团队能够通过计划和执行深思熟虑的工作来集中注意力和有效行动的方法。您是一个智能数据开发团队的成员或经理，该团队渴望通过您的服务和数据产品对世界产生影响。你应该每天带着对相关工作的敏锐眼光来工作，这些工作旨在推进一个项目。你应该鼓励你的客户参与到工作中来。在团队中，您应该通过帮助确定问题的范围、寻找知识差距以及清晰地阐述定义明确的实验，来帮助引导数据问题在未知和未导航的领域中的进展。

在第 [11](11.html) 章“自组织团队”中，我们将描述在许多从事数据项目的团队中可以发现的个性，以及如何利用团队中的多样性来生产更好的产品。

<aside class="FootnoteSection" epub:type="footnotes">Footnotes [1](#Fn1_source)

史蒂夫·乔布斯说过:“简单可能比复杂更难:你必须努力理清思路，才能让事情变得简单。但最终还是值得的，因为一旦你到了那里，你就可以移山。”另一方面，benot Mandelbrot 说，“简化，复杂化。”乔布斯在谈论减少解决方案中的维度以达到优雅；Mandelbrot 谈到引入自由度来更好地理解和操作问题空间。

  [2](#Fn2_source)

折扣累积收益–一种衡量预测排名与已知正确排名的准确性的指标。

  [3](#Fn3_source)

术语“英雄”通常用于表示数据驱动项目中重要到不能失败的实体、结果或场景。

  [4](#Fn4_source)

当用来描述系统设计和实现的策略时，Fail fast 实际上是一个隐喻，指的是实现的 fail fast 方法，其中代码被设计为尽可能早地引发异常或失败，以避免浪费时间和计算。

  [5](#Fn5_source)

DSAT(反义词:SAT)是不满意的客户体验。它通常是一个大写的单词。

 </aside>